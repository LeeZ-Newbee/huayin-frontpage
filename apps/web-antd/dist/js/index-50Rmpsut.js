var B=(V,P,f)=>new Promise((w,g)=>{var c=p=>{try{v(f.next(p))}catch(x){g(x)}},C=p=>{try{v(f.throw(p))}catch(x){g(x)}},v=p=>p.done?w(p.value):Promise.resolve(p.value).then(c,C);v((f=f.apply(V,P)).next())});import{Q as d,bF as U,b$ as Z}from"./bootstrap-AhoI3cF7.js";import{b as ee,l as te,o as le}from"./person-BJV_zc89.js";import{S as D}from"./constants-DuR_0wel.js";import{G as oe,a as N,f as q}from"./mediatag-IPg4UPd1.js";import{J as k}from"./job-Ddy8aTZs.js";import{C as h}from"./index-BqMT5JZc.js";import{I as H}from"./index-B28cwavD.js";import ae from"./index-6dQj-GmT.js";import T from"./index-d-HB8sOx.js";import{a4 as se,P as I,J as ne,T as z,a9 as re,av as b,ab as i,x as n,ac as s,aB as o,F as M,aC as O,aa as y,a7 as l,aj as m,aq as S,ai as u,ad as ie}from"../jse/index-index-BGFxaiNb.js";import ue from"./index--N08gW3L.js";import{S as E}from"./index-DO9sw_nK.js";import{V as de}from"./check-button-group-Ml5PobRt.js";import"./index-yQLlPxke.js";import"./shallowequal-C0CKx7HT.js";import"./Trigger-Ds0nQJ_k.js";import"./vnode-De6MI5e4.js";import"./ResizeObserver.es-CDE7jhPe.js";import"./Overflow-BmVUizKr.js";import"./index-DE5nVqMR.js";import"./index-CuVJHQf5.js";import"./colors-BCfKdM9_.js";import"./collapseMotion-BT2mzro2.js";import"./slide-DAKYOkMl.js";import"./Dropdown-BfpC8GoB.js";import"./useRefs-BZAPiFdQ.js";import"./hasIn-5zuHBf5O.js";import"./isSymbol-CAVS9gyU.js";import"./isMobile-8sZ0LT6r.js";import"./useMergedState-DaKqPeK6.js";import"./isPlainObject-oSHsDXH3.js";import"./css-Dmgy8YJo.js";import"./LeftOutlined-xEgOgauq.js";import"./EyeOutlined-bXBn9nrh.js";import"./FormItemContext-BJPE-aTU.js";import"./statusUtils-Cje40Gmf.js";import"./BaseInput-DNOrFGeW.js";import"./index-BisQxLpu.js";import"./SearchOutlined-DFUUO7Wm.js";import"./index-D-c5ayet.js";import"./DownOutlined-CmeR7jqu.js";import"./CheckOutlined-B2hXiD_c.js";import"./move-BJ7gZJ6a.js";import"./circle-check-big-BUGT68c9.js";const pe={class:"flex h-full w-full gap-4 overflow-x-auto py-2"},me={class:"flex flex-col gap-4"},fe={class:"flex items-center gap-1"},ce={class:"flex flex-col gap-1",style:{"min-width":"200px"}},ve={class:"text-lg font-medium"},xe={class:"flex items-center gap-1"},ye={class:"flex flex-col gap-4"},ge={class:"flex items-center gap-1"},_e={class:"flex flex-col gap-1",style:{"min-width":"200px"}},he={class:"text-lg font-medium"},we={class:"flex items-center gap-1"},ke={class:"flex w-full flex-col gap-2"},Ie={class:"flex gap-1"},be={class:"flex gap-1"},Pe={class:"flex gap-4"},Ce={class:"flex gap-4"},Be={class:"flex h-full flex-col"},Me=["src","onPlay"],Oe=5,wt=se({__name:"index",setup(V){var L,W;const P=I([]),f=I([]),w=I([]),g=I([]);let c=0;const C=oe,v=I((L=C[0])==null?void 0:L.value);function p(){var a;r.tagId=(a=x.value[0])==null?void 0:a.value}const x=ne(()=>v.value===N.Man?F:J),F=q(N.Man,k.yscv),J=q(N.Women,k.yscv),j=z({beforeChange:void 0,disabled:!1,gap:20,showIcon:!1,size:"middle",allowClear:!1}),r=z({avatarName:void 0,priceHigh:500,priceLow:0,tagId:(W=x.value[0])==null?void 0:W.value,jobId:k.yscv});function Q(){return B(this,null,function*(){if(r.priceHigh<=r.priceLow){U.warning("最高价格不能小于最低价格");return}const a=yield ee(r);console.warn(`小样搜索结果: ${a.auditions}`),w.value=a.auditions,c=0,R()})}function R(){const a=w.value;if(!a)return;const t=a.length;if(t===0){g.value=[];return}const e=Math.min(c+Oe,t);if(e===c){U.info("没有更多了");return}g.value=a.slice(c,e),c=e}function A(){return B(this,null,function*(){const a=yield te(k.yscv);console.warn(`新人榜${a}`),P.value=a})}function K(){return B(this,null,function*(){const a=yield le(k.yscv);console.warn(`老人榜${a}`),f.value=a})}function X(a){var e;console.warn(`开始播放${a}`);const t=(e=w.value)==null?void 0:e.find(_=>_.demoId===a);t&&(t.isPlayed=!0)}function Y(a){Z.push({name:"PersonDetail",params:{artistId:a}})}return re(()=>{A(),K()}),(a,t)=>(i(),b("div",pe,[n(l(h),{class:"flex-1"},{title:s(()=>t[5]||(t[5]=[o("div",{class:"w-full text-center"},"最新演员",-1)])),default:s(()=>[o("div",me,[(i(!0),b(M,null,O(P.value,e=>(i(),y(l(h),{key:e.artistId},{default:s(()=>{var _,$,G;return[o("div",fe,[n(l(H),{src:l(D)+e.avatar,height:"60px",width:"60px"},null,8,["src"]),o("div",ce,[o("span",ve,m(e.nickName),1),o("div",xe,[((_=e.recommendWord1)==null?void 0:_.length)>0?(i(),y(l(d),{key:0,style:{cursor:"default","pointer-events":"none"}},{default:s(()=>[u(m(e.recommendWord1),1)]),_:2},1024)):S("",!0),(($=e.recommendWord2)==null?void 0:$.length)>0?(i(),y(l(d),{key:1,style:{cursor:"default","pointer-events":"none"}},{default:s(()=>[u(m(e.recommendWord2),1)]),_:2},1024)):S("",!0),((G=e.recommendWord3)==null?void 0:G.length)>0?(i(),y(l(d),{key:2,style:{cursor:"default","pointer-events":"none"}},{default:s(()=>[u(m(e.recommendWord3),1)]),_:2},1024)):S("",!0)])])])]}),_:2},1024))),128))])]),_:1}),n(l(h),{class:"flex-1"},{title:s(()=>t[6]||(t[6]=[o("div",{class:"w-full text-center"},"合作默契榜",-1)])),default:s(()=>[o("div",ye,[(i(!0),b(M,null,O(f.value,e=>(i(),y(l(h),{key:e.artistId},{default:s(()=>[o("div",ge,[n(l(H),{src:l(D)+e.avatar,height:"60px",width:"60px"},null,8,["src"]),o("div",_e,[o("span",he,m(e.nickName),1),o("div",we,[n(l(ue),{"allow-half":!0,value:Math.floor(e.score)/2,count:5,disabled:!0},null,8,["value"]),o("span",null,m(Math.floor(e.score))+"分",1)])])])]),_:2},1024))),128))])]),_:1}),n(l(h),{class:"flex-[2]"},{title:s(()=>t[7]||(t[7]=[o("div",{class:"w-full text-center"},"选角",-1)])),default:s(()=>[o("div",ke,[o("div",Ie,[n(l(d),{type:"text",style:{cursor:"default","pointer-events":"none"}},{default:s(()=>t[8]||(t[8]=[u(" 艺名: ")])),_:1,__:[8]}),n(l(ae),{value:r.avatarName,"onUpdate:value":t[0]||(t[0]=e=>r.avatarName=e),type:"text",style:{width:"200px"},placeholder:"模糊搜索"},null,8,["value"]),n(l(d),{type:"primary",onClick:Q},{default:s(()=>t[9]||(t[9]=[u(" 搜索 ")])),_:1,__:[9]})]),o("div",be,[n(l(d),{type:"text",style:{cursor:"default","pointer-events":"none"}},{default:s(()=>t[10]||(t[10]=[u(" 性别: ")])),_:1,__:[10]}),n(l(T),{value:v.value,"onUpdate:value":t[1]||(t[1]=e=>v.value=e),style:{width:"100px"},onChange:p},{default:s(()=>[(i(!0),b(M,null,O(l(C),e=>(i(),y(l(T).Option,{value:e.value,key:e.value},{default:s(()=>[u(m(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),o("div",Pe,[n(l(d),{type:"text",style:{cursor:"default","pointer-events":"none"}},{default:s(()=>t[11]||(t[11]=[u(" 价格: ")])),_:1,__:[11]}),n(l(E),{value:r.priceLow,"onUpdate:value":t[2]||(t[2]=e=>r.priceLow=e),max:500,min:0,"show-value":"true",style:{width:"100px"}},null,8,["value"]),o("span",null,m(r.priceLow),1),n(l(E),{value:r.priceHigh,"onUpdate:value":t[3]||(t[3]=e=>r.priceHigh=e),max:500,min:0,style:{width:"100px"}},null,8,["value"]),o("span",null,m(r.priceHigh),1)]),o("div",Ce,[n(l(d),{type:"text",style:{cursor:"default","pointer-events":"none"}},{default:s(()=>t[12]||(t[12]=[u(" 标签: ")])),_:1,__:[12]}),n(l(de),ie({modelValue:r.tagId,"onUpdate:modelValue":t[4]||(t[4]=e=>r.tagId=e),options:x.value},j),null,16,["modelValue","options"])]),t[16]||(t[16]=o("div",{class:"border-b border-gray-200"},null,-1)),o("div",Be,[(i(!0),b(M,null,O(g.value,e=>(i(),y(l(h),{key:e.artistId},{default:s(()=>[o("audio",{src:l(D)+e.fileUrl,controls:"",width:"400",height:"200",onPlay:_=>X(e.demoId)},null,40,Me),t[14]||(t[14]=o("div",{style:{height:"10px"}},null,-1)),n(l(d),{type:"primary",disabled:e.isPlayed!==!0,onClick:_=>Y(e.artistId)},{default:s(()=>t[13]||(t[13]=[u(" 查看艺人详情 ")])),_:2,__:[13]},1032,["disabled","onClick"])]),_:2,__:[14]},1024))),128))]),n(l(d),{type:"primary",onClick:R},{default:s(()=>t[15]||(t[15]=[u("换一批")])),_:1,__:[15]})])]),_:1})]))}});export{wt as default};
