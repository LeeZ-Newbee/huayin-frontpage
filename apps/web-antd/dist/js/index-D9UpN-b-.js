var b=Object.defineProperty,g=Object.defineProperties;var v=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var y=(o,e,t)=>e in o?b(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,k=(o,e)=>{for(var t in e||(e={}))M.call(e,t)&&y(o,t,e[t]);if(_)for(var t of _(e))w.call(e,t)&&y(o,t,e[t]);return o},x=(o,e)=>g(o,v(e));var d=(o,e,t)=>new Promise((n,m)=>{var l=a=>{try{i(t.next(a))}catch(s){m(s)}},c=a=>{try{i(t.throw(a))}catch(s){m(s)}},i=a=>a.done?n(a.value):Promise.resolve(a.value).then(l,c);i((t=t.apply(o,e)).next())});import{ce as B,Q as h,cf as L,bF as N,cg as A}from"./bootstrap-AhoI3cF7.js";import{_ as T}from"./add-user-dialog.vue_vue_type_script_setup_true_lang-Dv93i8WW.js";import{_ as V}from"./page.vue_vue_type_script_setup_true_lang-C6MBkg86.js";import{a as q}from"./AlertBuilder-D-i_DxGb.js";import{a4 as I,P as $,J as z,a9 as D,aa as F,ab as J,ac as C,x as f,a7 as p,ai as P,k as U}from"../jse/index-index-BGFxaiNb.js";import{u as Q}from"./use-refresh-W8rkfSXm.js";import{u as j}from"./use-modal-BnAkNa_Z.js";import{T as E}from"./index-CS3wBF80.js";import"./circle-check-big-BUGT68c9.js";import"./x-BIg8l5y-.js";import"./index-Bgp16CHr.js";import"./index-D-c5ayet.js";import"./Trigger-Ds0nQJ_k.js";import"./vnode-De6MI5e4.js";import"./ResizeObserver.es-CDE7jhPe.js";import"./BaseInput-DNOrFGeW.js";import"./css-Dmgy8YJo.js";import"./Overflow-BmVUizKr.js";import"./index-DE5nVqMR.js";import"./isMobile-8sZ0LT6r.js";import"./DownOutlined-CmeR7jqu.js";import"./CheckOutlined-B2hXiD_c.js";import"./SearchOutlined-DFUUO7Wm.js";import"./move-BJ7gZJ6a.js";import"./slide-DAKYOkMl.js";import"./collapseMotion-BT2mzro2.js";import"./index-DZX7gXWR.js";import"./index-BiXkxark.js";import"./LeftOutlined-xEgOgauq.js";import"./index-d-HB8sOx.js";import"./useMergedState-DaKqPeK6.js";import"./FormItemContext-BJPE-aTU.js";import"./statusUtils-Cje40Gmf.js";import"./index-BisQxLpu.js";import"./index-CuVJHQf5.js";import"./colors-BCfKdM9_.js";import"./index-BtBJXpDv.js";import"./Checkbox-DOKq1s92.js";import"./Dropdown-BfpC8GoB.js";import"./index-yQLlPxke.js";import"./shallowequal-C0CKx7HT.js";import"./index-DLqneIQi.js";import"./index-6dQj-GmT.js";import"./isPlainObject-oSHsDXH3.js";import"./EyeOutlined-bXBn9nrh.js";import"./isSymbol-CAVS9gyU.js";const Dt=I({__name:"index",setup(o){const{refresh:e}=Q(),[t,n]=j({connectedComponent:T}),m=[{title:"用户名",dataIndex:"name",key:"name"},{title:"角色",dataIndex:"role",key:"role"},{title:"操作",key:"action",customRender:({record:r})=>U("div",[U(h,{type:"primary",size:"small",onClick:()=>l(r)},()=>"删除")])}];function l(r){q("确定删除该用户么？").then(()=>{c(r)})}function c(r){return d(this,null,function*(){(yield L(r.name))&&(N.success("删除成功"),e())})}const i=$([]),a=z(()=>i.value.map(r=>x(k({},r),{role:r.role===B.Manager?"管理员":"导演"})));function s(){return d(this,null,function*(){const r=yield A();r&&(i.value=r.users)})}function R(){n.open()}return D(()=>{s()}),(r,u)=>(J(),F(p(V),{"auto-content-height":""},{default:C(()=>[f(p(t)),f(p(h),{type:"primary",onClick:R},{default:C(()=>u[0]||(u[0]=[P("新增用户")])),_:1,__:[0]}),f(p(E),{"data-source":a.value,columns:m,pagination:!1},null,8,["data-source"])]),_:1}))}});export{Dt as default};
