var k=(R,w,m)=>new Promise((g,c)=>{var f=s=>{try{_(m.next(s))}catch(h){c(h)}},b=s=>{try{_(m.throw(s))}catch(h){c(h)}},_=s=>s.done?g(s.value):Promise.resolve(s.value).then(f,b);_((m=m.apply(R,w)).next())});import{Q as d,bF as $,b$ as F}from"./bootstrap-AhoI3cF7.js";import{b as j,l as J,o as Q}from"./person-BJV_zc89.js";import{S as B}from"./constants-DuR_0wel.js";import{J as I}from"./job-Ddy8aTZs.js";import{f as A}from"./mediatag-IPg4UPd1.js";import{C as x}from"./index-BqMT5JZc.js";import{I as W}from"./index-B28cwavD.js";import G from"./index--N08gW3L.js";import K from"./index-6dQj-GmT.js";import{S as q}from"./index-DO9sw_nK.js";import{V as X}from"./check-button-group-Ml5PobRt.js";import{a4 as Y,P,T as H,a9 as Z,av as C,ab as n,x as i,ac as r,aB as o,F as D,aC as N,aa as y,a7 as l,aj as p,aq as V,ai as u,ad as ee}from"../jse/index-index-BGFxaiNb.js";import"./index-yQLlPxke.js";import"./shallowequal-C0CKx7HT.js";import"./Trigger-Ds0nQJ_k.js";import"./vnode-De6MI5e4.js";import"./ResizeObserver.es-CDE7jhPe.js";import"./Overflow-BmVUizKr.js";import"./index-DE5nVqMR.js";import"./index-CuVJHQf5.js";import"./colors-BCfKdM9_.js";import"./collapseMotion-BT2mzro2.js";import"./slide-DAKYOkMl.js";import"./Dropdown-BfpC8GoB.js";import"./useRefs-BZAPiFdQ.js";import"./hasIn-5zuHBf5O.js";import"./isSymbol-CAVS9gyU.js";import"./isMobile-8sZ0LT6r.js";import"./useMergedState-DaKqPeK6.js";import"./isPlainObject-oSHsDXH3.js";import"./css-Dmgy8YJo.js";import"./LeftOutlined-xEgOgauq.js";import"./EyeOutlined-bXBn9nrh.js";import"./FormItemContext-BJPE-aTU.js";import"./statusUtils-Cje40Gmf.js";import"./BaseInput-DNOrFGeW.js";import"./index-BisQxLpu.js";import"./SearchOutlined-DFUUO7Wm.js";import"./circle-check-big-BUGT68c9.js";const te={class:"flex h-full w-full gap-4 overflow-x-auto py-2"},le={class:"flex flex-col gap-4"},oe={class:"flex items-center gap-1"},se={class:"flex flex-col gap-1",style:{"min-width":"200px"}},ae={class:"text-lg font-medium"},re={class:"flex items-center gap-1"},ie={class:"flex flex-col gap-4"},ne={class:"flex items-center gap-1"},de={class:"flex flex-col gap-1",style:{"min-width":"200px"}},ue={class:"text-lg font-medium"},pe={class:"flex items-center gap-1"},me={class:"flex w-full flex-col gap-2"},fe={class:"flex gap-1"},ce={class:"flex gap-4"},ve={class:"flex gap-4"},xe={class:"flex h-full flex-col gap-4"},ye=["src","onPlay"],ge=5,at=Y({__name:"index",setup(R){var L;const w=P([]),m=P([]),g=P([]),c=P([]);let f=0;const b=A(void 0,I.pszb),_=H({beforeChange:void 0,disabled:!1,gap:20,showIcon:!1,size:"middle",allowClear:!1}),s=H({avatarName:void 0,priceHigh:500,priceLow:0,tagId:(L=b[0])==null?void 0:L.value,jobId:I.pszb});function h(){return k(this,null,function*(){if(s.priceHigh<=s.priceLow){$.warning("最高价格不能小于最低价格");return}const a=yield j(s);console.warn(`小样搜索结果: ${a.auditions}`),g.value=a.auditions,f=0,S()})}function O(){return k(this,null,function*(){const a=yield J(I.pszb);console.warn(`新人榜${a}`),w.value=a})}function U(){return k(this,null,function*(){const a=yield Q(I.pszb);console.warn(`老人榜${a}`),m.value=a})}function T(a){var t;console.warn(`开始播放${a}`);const e=(t=g.value)==null?void 0:t.find(v=>v.demoId===a);e&&(e.isPlayed=!0)}function S(){const a=g.value;if(!a)return;const e=a.length;if(e===0){c.value=[];return}const t=Math.min(f+ge,e);if(t===f){$.info("没有更多了");return}c.value=a.slice(f,t),f=t}function E(a){if(!a){console.error("艺人id为空");return}F.push({name:"PersonDetail",params:{artistId:a}})}return Z(()=>{O(),U()}),(a,e)=>(n(),C("div",te,[i(l(x),{class:"flex-1"},{title:r(()=>e[4]||(e[4]=[o("div",{class:"w-full text-center"},"最新演员",-1)])),default:r(()=>[o("div",le,[(n(!0),C(D,null,N(w.value,t=>(n(),y(l(x),{key:t.artistId},{default:r(()=>{var v,M,z;return[o("div",oe,[i(l(W),{src:l(B)+t.avatar,height:"60px",width:"60px"},null,8,["src"]),o("div",se,[o("span",ae,p(t.nickName),1),o("div",re,[((v=t.recommendWord1)==null?void 0:v.length)>0?(n(),y(l(d),{key:0,style:{cursor:"default","pointer-events":"none"}},{default:r(()=>[u(p(t.recommendWord1),1)]),_:2},1024)):V("",!0),((M=t.recommendWord2)==null?void 0:M.length)>0?(n(),y(l(d),{key:1,style:{cursor:"default","pointer-events":"none"}},{default:r(()=>[u(p(t.recommendWord2),1)]),_:2},1024)):V("",!0),((z=t.recommendWord3)==null?void 0:z.length)>0?(n(),y(l(d),{key:2,style:{cursor:"default","pointer-events":"none"}},{default:r(()=>[u(p(t.recommendWord3),1)]),_:2},1024)):V("",!0)])])])]}),_:2},1024))),128))])]),_:1}),i(l(x),{class:"flex-1"},{title:r(()=>e[5]||(e[5]=[o("div",{class:"w-full text-center"},"合作默契榜",-1)])),default:r(()=>[o("div",ie,[(n(!0),C(D,null,N(m.value,t=>(n(),y(l(x),{key:t.artistId},{default:r(()=>[o("div",ne,[i(l(W),{src:l(B)+t.avatar,height:"60px",width:"60px"},null,8,["src"]),o("div",de,[o("span",ue,p(t.nickName),1),o("div",pe,[i(l(G),{"allow-half":!0,value:Math.floor(t.score)/2,count:5,disabled:!0},null,8,["value"]),o("span",null,p(Math.floor(t.score))+"分",1)])])])]),_:2},1024))),128))])]),_:1}),i(l(x),{class:"flex-[2]"},{title:r(()=>e[6]||(e[6]=[o("div",{class:"w-full text-center"},"选角",-1)])),default:r(()=>[o("div",me,[o("div",fe,[i(l(d),{type:"text",style:{cursor:"default","pointer-events":"none"}},{default:r(()=>e[7]||(e[7]=[u(" 艺名: ")])),_:1,__:[7]}),i(l(K),{value:s.avatarName,"onUpdate:value":e[0]||(e[0]=t=>s.avatarName=t),type:"text",style:{width:"200px"},placeholder:"模糊搜索"},null,8,["value"]),i(l(d),{type:"primary",onClick:h},{default:r(()=>e[8]||(e[8]=[u(" 搜索 ")])),_:1,__:[8]})]),o("div",ce,[i(l(d),{type:"text",style:{cursor:"default","pointer-events":"none"}},{default:r(()=>e[9]||(e[9]=[u(" 价格: ")])),_:1,__:[9]}),i(l(q),{value:s.priceLow,"onUpdate:value":e[1]||(e[1]=t=>s.priceLow=t),max:500,min:0,"show-value":"true",style:{width:"100px"}},null,8,["value"]),o("span",null,p(s.priceLow),1),i(l(q),{value:s.priceHigh,"onUpdate:value":e[2]||(e[2]=t=>s.priceHigh=t),max:500,min:0,style:{width:"100px"}},null,8,["value"]),o("span",null,p(s.priceHigh),1)]),o("div",ve,[i(l(d),{type:"text",style:{cursor:"default","pointer-events":"none"}},{default:r(()=>e[10]||(e[10]=[u(" 标签: ")])),_:1,__:[10]}),i(l(X),ee({modelValue:s.tagId,"onUpdate:modelValue":e[3]||(e[3]=t=>s.tagId=t),options:l(b)},_),null,16,["modelValue","options"])]),e[14]||(e[14]=o("div",{class:"border-b border-gray-200"},null,-1)),o("div",xe,[(n(!0),C(D,null,N(c.value,t=>(n(),y(l(x),{key:t.artistId},{default:r(()=>[o("audio",{src:l(B)+t.fileUrl,controls:"",width:"400",height:"200",onPlay:v=>T(t.demoId)},null,40,ye),e[12]||(e[12]=o("div",{style:{height:"10px"}},null,-1)),i(l(d),{type:"primary",disabled:t.isPlayed!==!0,onClick:v=>E(t.artistId)},{default:r(()=>e[11]||(e[11]=[u(" 查看艺人详情 ")])),_:2,__:[11]},1032,["disabled","onClick"])]),_:2,__:[12]},1024))),128))]),i(l(d),{type:"primary",onClick:S},{default:r(()=>e[13]||(e[13]=[u("换一批")])),_:1,__:[13]})])]),_:1})]))}});export{at as default};
