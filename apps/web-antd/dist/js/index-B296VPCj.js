var b=(u,o,r)=>new Promise((a,c)=>{var f=e=>{try{s(r.next(e))}catch(t){c(t)}},v=e=>{try{s(r.throw(e))}catch(t){c(t)}},s=e=>e.done?a(e.value):Promise.resolve(e.value).then(f,v);s((r=r.apply(u,o)).next())});import{a4 as k,T as P,a$ as V,P as B,b1 as I,aa as h,ab as y,ac as l,aB as x,av as q,aq as C,x as m,a7 as n,ai as p,aj as w}from"../jse/index-index-BGFxaiNb.js";import{bE as _,Q as d,bF as N}from"./bootstrap-AhoI3cF7.js";import{s as F,a as R}from"./person-BJV_zc89.js";import S from"./index-6dQj-GmT.js";import{C as $}from"./index-BqMT5JZc.js";import"./FormItemContext-BJPE-aTU.js";import"./statusUtils-Cje40Gmf.js";import"./vnode-De6MI5e4.js";import"./BaseInput-DNOrFGeW.js";import"./css-Dmgy8YJo.js";import"./index-BisQxLpu.js";import"./SearchOutlined-DFUUO7Wm.js";import"./isPlainObject-oSHsDXH3.js";import"./index-DE5nVqMR.js";import"./ResizeObserver.es-CDE7jhPe.js";import"./EyeOutlined-bXBn9nrh.js";import"./index-yQLlPxke.js";import"./shallowequal-C0CKx7HT.js";import"./Trigger-Ds0nQJ_k.js";import"./Overflow-BmVUizKr.js";import"./index-CuVJHQf5.js";import"./colors-BCfKdM9_.js";import"./collapseMotion-BT2mzro2.js";import"./slide-DAKYOkMl.js";import"./Dropdown-BfpC8GoB.js";import"./useRefs-BZAPiFdQ.js";import"./hasIn-5zuHBf5O.js";import"./isSymbol-CAVS9gyU.js";import"./isMobile-8sZ0LT6r.js";import"./useMergedState-DaKqPeK6.js";const D={class:"flex flex-col gap-4"},M={class:"flex gap-1"},Y={key:0,class:"flex gap-1"},ve=k({__name:"index",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(u){const o=P({time:void 0,content:void 0,director:void 0,score:0,evaluate:void 0,artistId:0}),r=V(u,"modelValue"),a=B(null);function c(){return b(this,null,function*(){const e=r.value;if(console.warn(`搜索艺人:${e}`),e===void 0||e.length===0){N.warn("搜索内容不能为空");return}const t=yield F(e);console.warn(`搜索艺人结果:${t}`),Object.entries(t).forEach(([i,g])=>{console.warn(i,g)}),a.value=t,o.artistId=t.artistId})}function f(e){return b(this,null,function*(){console.warn(`提交表单: ${e}`),(yield R(o))&&(N.success({content:"创建评价成功"}),s.resetForm())})}const[v,s]=_({commonConfig:{colon:!0,componentProps:{class:"w-full"}},handleSubmit:f,handleValuesChange(e,t){if(o.score=e.rate===void 0?0:e.rate*2,e.date!==void 0){const i=I(e.date).valueOf();o.time=i}e.content!==void 0&&(o.content=e.content),e.director!==void 0&&(o.director=e.director),e.comments!==void 0&&(o.evaluate=e.comments)},layout:"horizontal",schema:[{component:"DatePicker",fieldName:"date",componentProps:{format:"YYYY-MM-DD",placeholder:"请选择日期"},label:"日期",rules:"required"},{component:"Input",fieldName:"content",label:"合作内容",rules:"required"},{component:"Input",fieldName:"director",label:"配音导演",rules:"required"},{component:"Rate",fieldName:"rate",label:"评分",rules:"required",componentProps:{count:5,allowHalf:!0,disabled:!1},suffix:()=>`${o.score}`},{component:"Textarea",fieldName:"comments",rules:"required",formItemClass:"col-span-4 items-baseline",label:"评价",componentProps:{rows:20,placeholder:"请输入不少于30字的评价",minlength:30}}],wrapperClass:"grid-cols-4"});return(e,t)=>(y(),h(n($),null,{default:l(()=>[x("div",D,[x("div",M,[m(n(d),{type:"text",style:{cursor:"default","pointer-events":"none"}},{default:l(()=>t[1]||(t[1]=[p(" 艺名： ")])),_:1,__:[1]}),m(n(S),{value:r.value,"onUpdate:value":t[0]||(t[0]=i=>r.value=i),type:"text",style:{width:"400px"}},null,8,["value"]),m(n(d),{type:"primary",onClick:c},{default:l(()=>t[2]||(t[2]=[p("搜索")])),_:1,__:[2]})]),a.value?(y(),q("div",Y,[m(n(d),{type:"text",style:{cursor:"default","pointer-events":"none"}},{default:l(()=>[p(" 花名: "+w(a.value.nickName),1)]),_:1}),m(n(d),{type:"text",style:{cursor:"default","pointer-events":"none"}},{default:l(()=>[p(" 真名: "+w(a.value.name),1)]),_:1})])):C("",!0),a.value?(y(),h(n(v),{key:1})):C("",!0)])]),_:1}))}});export{ve as default};
