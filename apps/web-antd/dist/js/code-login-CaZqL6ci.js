var b=(m,u,n)=>new Promise((l,t)=>{var c=o=>{try{s(n.next(o))}catch(r){t(r)}},g=o=>{try{s(n.throw(o))}catch(r){t(r)}},s=o=>o.done?l(o.value):Promise.resolve(o.value).then(c,g);s((n=n.apply(m,u)).next())});import{aT as $,a_ as N,aS as e,aU as C,a$ as v}from"./bootstrap-AhoI3cF7.js";import{T as y}from"./auth-title-BcdW79H4.js";import{a4 as w,T as L,J as S,av as x,ab as k,x as T,aa as V,aq as P,ac as f,a8 as B,ai as p,aj as h,a7 as i,aB as A,aV as E,P as D}from"../jse/index-index-BGFxaiNb.js";const F={class:"text-muted-foreground"},q=w({name:"AuthenticationCodeLogin",__name:"code-login",props:{formSchema:{},loading:{type:Boolean,default:!1},loginPath:{default:"/auth/login"},title:{default:""},subTitle:{default:""},submitButtonText:{default:""},showBack:{type:Boolean,default:!0}},emits:["submit"],setup(m,{expose:u,emit:n}){const l=m,t=n,c=$(),[g,s]=N(L({commonConfig:{hideLabel:!0,hideRequiredMark:!0},schema:S(()=>l.formSchema),showDefaultActions:!1}));function o(){return b(this,null,function*(){const{valid:a}=yield s.validate(),d=yield s.getValues();a&&t("submit",d)})}function r(){c.push(l.loginPath)}return u({getFormApi:()=>s}),(a,d)=>(k(),x("div",null,[T(y,null,{desc:f(()=>[A("span",F,[B(a.$slots,"subTitle",{},()=>[p(h(a.subTitle||i(e)("authentication.codeSubtitle")),1)])])]),default:f(()=>[B(a.$slots,"title",{},()=>[p(h(a.title||i(e)("authentication.welcomeBack"))+" ðŸ“² ",1)])]),_:3}),T(i(g)),T(i(C),{class:E([{"cursor-wait":a.loading},"w-full"]),loading:a.loading,onClick:o},{default:f(()=>[B(a.$slots,"submitButtonText",{},()=>[p(h(a.submitButtonText||i(e)("common.login")),1)])]),_:3},8,["class","loading"]),a.showBack?(k(),V(i(C),{key:0,class:"mt-4 w-full",variant:"outline",onClick:d[0]||(d[0]=I=>r())},{default:f(()=>[p(h(i(e)("common.back")),1)]),_:1})):P("",!0)]))}}),_=6,H=w({name:"CodeLogin",__name:"code-login",setup(m){const u=D(!1),n=S(()=>[{component:"VbenInput",componentProps:{placeholder:e("authentication.mobile")},fieldName:"phoneNumber",label:e("authentication.mobile"),rules:v().min(1,{message:e("authentication.mobileTip")}).refine(t=>/^\d{11}$/.test(t),{message:e("authentication.mobileErrortip")})},{component:"VbenPinInput",componentProps:{codeLength:_,createText:t=>t>0?e("authentication.sendText",[t]):e("authentication.sendCode"),placeholder:e("authentication.code")},fieldName:"code",label:e("authentication.code"),rules:v().length(_,{message:e("authentication.codeTip",[_])})}]);function l(t){return b(this,null,function*(){console.log(t)})}return(t,c)=>(k(),V(i(q),{"form-schema":n.value,loading:u.value,onSubmit:l},null,8,["form-schema","loading"]))}});export{H as default};
