var i=(m,c,a)=>new Promise((r,t)=>{var s=e=>{try{n(a.next(e))}catch(o){t(o)}},l=e=>{try{n(a.throw(e))}catch(o){t(o)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,l);n((a=a.apply(m,c)).next())});import{bE as u,cc as d,cd as f,bF as b}from"./bootstrap-AhoI3cF7.js";import{a4 as h,aa as _,ab as w,ac as U,x as A,a7 as p}from"../jse/index-index-BGFxaiNb.js";import{u as C}from"./use-refresh-W8rkfSXm.js";import{u as N}from"./use-modal-BnAkNa_Z.js";const q=h({name:"AddUserDialog",__name:"add-user-dialog",setup(m){const{refresh:c}=C(),[a,r]=u({handleSubmit:l,schema:[{component:"Input",componentProps:{placeholder:"请输入"},fieldName:"name",label:"用户名",rules:"required"},{component:"Input",componentProps:{placeholder:"请输入"},fieldName:"password",label:"密码",rules:"required"},{component:"Select",componentProps:{options:d,placeholder:"请输入"},fieldName:"role",label:"用户角色",rules:"required"}],showDefaultActions:!1}),[t,s]=N({fullscreenButton:!1,onCancel(){s.close()},onConfirm:()=>i(null,null,function*(){yield r.validateAndSubmitForm()}),onOpenChange(e){if(e){const{values:o}=s.getData();o&&r.setValues(o)}},title:"添加新用户"});function l(e){n(e)}function n(e){return i(this,null,function*(){const o={name:e.name,password:e.password,role:e.role};(yield f(o))&&(b.success({content:"创建用户成功"}),s.close(),c())})}return(e,o)=>(w(),_(p(t),null,{default:U(()=>[A(p(a))]),_:1}))}});export{q as _};
