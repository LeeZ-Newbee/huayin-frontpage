var W=(L,q,u)=>new Promise((x,I)=>{var U=m=>{try{f(u.next(m))}catch(j){I(j)}},M=m=>{try{f(u.throw(m))}catch(j){I(j)}},f=m=>m.done?x(m.value):Promise.resolve(m.value).then(U,M);f((u=u.apply(L,q)).next())});import{bE as v,bF as O}from"./bootstrap-BYMVwl9-.js";import{c as ee,d as oe}from"./person-hRQmOZ3y.js";import{f as S,a as y,G as ne}from"./mediatag-B2-lPFLK.js";import{J as n,a as g}from"./job-B1KWQ4wi.js";import{C as w}from"./index-JUl1rTzf.js";import{_ as te}from"./page.vue_vue_type_script_setup_true_lang-C-nSzcTN.js";import{a4 as ae,P as c,r as k,bt as re,aa as b,ab as C,ac as l,aq as P,a7 as s,x as N,aB as F}from"../jse/index-index-BuhP3T1S.js";import{v as _}from"./AlertBuilder-BEh17U8H.js";import"./index-BdmOuEQL.js";import"./shallowequal-C53DoWkt.js";import"./Trigger-BlhMoqN0.js";import"./vnode-DSrtvPnf.js";import"./ResizeObserver.es-CDE7jhPe.js";import"./Overflow-BjgxJj-_.js";import"./index-CpiNDcGn.js";import"./index-BTKp6HsL.js";import"./colors-DhjuRTr1.js";import"./collapseMotion-CKo2FjD0.js";import"./slide-DNlnlJzo.js";import"./collapse-BbEVqHco.js";import"./useRefs-WzO_5FUu.js";import"./hasIn-nePwHA0j.js";import"./isMobile-8sZ0LT6r.js";import"./useMergedState-Du_cZ0lP.js";import"./isPlainObject-Cd6otT65.js";import"./circle-check-big-DafNGcJI.js";import"./x-DJz92f4i.js";const Be=ae({__name:"index",setup(L){const q=c(!0),u=c(!1),x=c(!1),I=c(!1),U=c(!1),M=c(!1),f=c(),m=c(),j=c(),R=S(void 0,n.pszb).map(e=>{var o;return{component:"Upload",componentProps:{accept:(o=g.find(t=>t.value===n.pszb))==null?void 0:o.mediaType,disabled:!1,action:"/api/upload",name:"file",onChange:d,maxCount:1,multiple:!1,showUploadList:!0,listType:"picture-card"},fieldName:e.value.toString(),label:e.label,renderComponentContent:()=>({default:()=>"点击上传音频"})}}),D=S(y.Man,n.yscv).map(e=>{var o;return{component:"Upload",componentProps:{accept:(o=g.find(t=>t.value===n.yscv))==null?void 0:o.mediaType,disabled:!1,action:"/api/upload",name:"file",onChange:d,maxCount:1,multiple:!1,showUploadList:!0,listType:"picture-card"},fieldName:e.value.toString(),label:e.label,renderComponentContent:()=>({default:()=>"点击上传音频"})}}),$=S(y.Women,n.yscv).map(e=>{var o;return{component:"Upload",componentProps:{accept:(o=g.find(t=>t.value===n.yscv))==null?void 0:o.mediaType,disabled:!1,action:"/api/upload",name:"file",onChange:d,maxCount:1,multiple:!1,showUploadList:!0,listType:"picture-card"},fieldName:e.value.toString(),label:e.label,renderComponentContent:()=>({default:()=>"点击上传音频"})}}),G=S(y.Man,n.djcv).map(e=>{var o;return{component:"Upload",componentProps:{accept:(o=g.find(t=>t.value===n.djcv))==null?void 0:o.mediaType,disabled:!1,action:"/api/upload",name:"file",onChange:d,maxCount:1,multiple:!1,showUploadList:!0,listType:"picture-card"},fieldName:e.value.toString(),label:e.label,renderComponentContent:()=>({default:()=>"点击上传视频"})}}),J=S(y.Women,n.djcv).map(e=>{var o;return{component:"Upload",componentProps:{accept:(o=g.find(t=>t.value===n.djcv))==null?void 0:o.mediaType,disabled:!1,action:"/api/upload",name:"file",onChange:d,maxCount:1,multiple:!1,showUploadList:!0,listType:"picture-card"},fieldName:e.value.toString(),label:e.label,renderComponentContent:()=>({default:()=>"点击上传视频"})}}),[Y,Q]=v({commonConfig:{colon:!0,componentProps:{class:"w-full"}},fieldMappingTime:[["rangePicker",["startTime","endTime"],"YYYY-MM-DD"]],handleSubmit:X,handleValuesChange(e,o){},layout:"horizontal",schema:[{component:"Input",componentProps:{placeholder:"请输入"},fieldName:"nickname",label:"艺名",rules:"required"},{component:"Input",componentProps:{placeholder:"请输入"},fieldName:"name",label:"真名",rules:"required"},{colon:!1,component:"Select",componentProps:{allowClear:!0,filterOption:!0,options:ne,placeholder:"请选择",showSearch:!0},fieldName:"gender",label:"性别 : "},{component:"InputNumber",componentProps:{placeholder:"请输入"},fieldName:"banknum",label:"银行卡号",rules:"required"},{component:"Input",componentProps:{placeholder:"请输入"},fieldName:"creditcard",label:"身份证号",rules:"required"},{component:"Input",componentProps:{placeholder:"请输入"},fieldName:"qq",label:"QQ",rules:"required"},{component:"Input",componentProps:{placeholder:"请输入"},fieldName:"address",label:"地址",rules:"required"},{component:"Input",componentProps:{placeholder:"请输入"},fieldName:"wechat",label:"微信",rules:"required"},{component:"InputNumber",componentProps:{placeholder:"请输入"},fieldName:"emerge_phone",label:"紧急联系人 电话",rules:"required"},{component:"InputNumber",componentProps:{placeholder:"请输入"},fieldName:"phone",label:"电话",rules:"required"},{colon:!1,component:"Select",componentProps:{allowClear:!0,filterOption:!0,options:g,placeholder:"请选择",showSearch:!0},formItemClass:"col-span-1 items-baseline",fieldName:"job",label:"人员分类 : ",rules:"required"},{component:"InputNumber",componentProps:{placeholder:"请输入"},fieldName:"price",formItemClass:"col-span-1 items-baseline",label:"费用报价",rules:"required"},{component:"InputNumber",componentProps:{placeholder:"排名优先级(1~100)"},fieldName:"priority",formItemClass:"col-span-1 items-baseline",label:"优先级"},{component:"Input",componentProps:{placeholder:"请输入"},fieldName:"recommend1",label:"推荐词1(4字以内)"},{component:"Input",componentProps:{placeholder:"请输入"},fieldName:"recommend2",label:"推荐词2"},{component:"Input",componentProps:{placeholder:"请输入"},fieldName:"recommend3",label:"推荐词3"},{component:"Upload",componentProps:{accept:".png,.jpg,.jpeg",disabled:!1,action:"/api/upload",name:"file",onChange:d,maxCount:1,multiple:!1,showUploadList:!0,listType:"picture-card"},fieldName:"avatar",label:"头像",renderComponentContent:()=>({default:()=>"+"}),rules:"required"},{component:"Upload",componentProps:{accept:".png,.jpg,.jpeg",disabled:!1,action:"/api/upload",name:"file",onChange:d,maxCount:1,multiple:!1,showUploadList:!0,listType:"picture-card"},fieldName:"idCardFront",label:"身份证正面",renderComponentContent:()=>({default:()=>"+"}),rules:"required"},{component:"Upload",componentProps:{accept:".png,.jpg,.jpeg",action:"/api/upload",disabled:!1,onChange:d,name:"file",maxCount:1,multiple:!1,showUploadList:!0,listType:"picture-card"},fieldName:"idCardReverse",label:"身份证反面",renderComponentContent:()=>({default:()=>"+"}),rules:"required"}],wrapperClass:"grid-cols-2"}),[E,le]=v({commonConfig:{colon:!0,componentProps:{class:"w-full"}},handleSubmit:V,layout:"horizontal",schema:R,wrapperClass:"grid-cols-3"}),[Z,se]=v({commonConfig:{colon:!0,componentProps:{class:"w-full"}},handleSubmit:V,layout:"horizontal",schema:D,wrapperClass:"grid-cols-3"}),[ie,pe]=v({commonConfig:{colon:!0,componentProps:{class:"w-full"}},handleSubmit:V,layout:"horizontal",schema:$,wrapperClass:"grid-cols-3"}),[H,me]=v({commonConfig:{colon:!0,componentProps:{class:"w-full"}},handleSubmit:V,layout:"horizontal",schema:G,wrapperClass:"grid-cols-3"}),[K,ce]=v({commonConfig:{colon:!0,componentProps:{class:"w-full"}},handleSubmit:V,layout:"horizontal",schema:J,wrapperClass:"grid-cols-3"});function d({file:e,fileList:o}){e.status==="done"?O.success(`上传成功${e.response.data.url}`):e.status==="error"&&O.error("上传失败")}function X(e){return W(this,null,function*(){const o=k(e.avatar).filter(a=>a.status==="done").map(a=>{var p,r;return((r=(p=a.response)==null?void 0:p.data)==null?void 0:r.url)||a.url}),t=k(e.idCardFront).filter(a=>a.status==="done").map(a=>{var p,r;return((r=(p=a.response)==null?void 0:p.data)==null?void 0:r.url)||a.url}),T=k(e.idCardReverse).filter(a=>a.status==="done").map(a=>{var p,r;return((r=(p=a.response)==null?void 0:p.data)==null?void 0:r.url)||a.url}),i=Number.parseInt(e.job);j.value=i,m.value=Number.parseInt(e.gender);const z={artistId:void 0,nickName:e.nickname,name:e.name,avatar:o[0],job:i,address:e.address,qq:e.qq,wechat:e.wechat,telephone:e.phone,emergencyTelphone:e.emerge_phone,creditCardNum:e.banknum,recommendWord1:e.recommend1,recommendWord2:e.recommend2,recommendWord3:e.recommend3,identityCardFront:t[0],identityCardReverse:T[0],salary:e.price,priorityRating:e.priority,createTime:void 0,gender:e.gender,ID:e.creditcard},h=yield ee(z);h.artistId&&(f.value=h.artistId,_({content:`添加成功(${f.value})`,icon:"success"}).then(()=>{Q.resetForm(),i===n.pszb||i===n.zbpb||i===n.yscv||i===n.djcv?(console.warn(`特殊岗位${i}`),q.value=!1,i===n.pszb||i===n.zbpb?u.value=!0:i===n.yscv?e.gender===y.Man?x.value=!0:I.value=!0:e.gender===y.Man?U.value=!0:M.value=!0):console.warn(`非特殊岗位${i}`)}))})}function V(e){return W(this,null,function*(){if(Object.keys(e).length===0)return;const o=f.value;if(o===void 0){_({content:"艺人id不存在",icon:"error"});return}yield Promise.all(Object.entries(e).map(i=>W(null,[i],function*([t,T]){if(T===void 0)return;console.warn(t,T);const z=t,h=T.filter(r=>r.status==="done").map(r=>{var A,B;return((B=(A=r.response)==null?void 0:A.data)==null?void 0:B.url)||r.url})[0];if(console.warn(z,h),h===void 0)return;const a={demoType:Number.parseInt(z),fileUrl:h,artistId:o},p=yield oe(a);console.warn(p)}))),_({content:"添加完成",icon:"success"}).then(()=>{window.location.reload()})})}return(e,o)=>{const t=re("yscvWomenVoiceForm");return C(),b(s(te),null,{default:l(()=>[q.value?(C(),b(s(w),{key:0},{title:l(()=>o[0]||(o[0]=[F("div",{class:"w-full text-center"},"人员档案录入",-1)])),default:l(()=>[N(s(Y))]),_:1})):P("",!0),u.value?(C(),b(s(w),{key:1},{title:l(()=>o[1]||(o[1]=[F("div",{class:"w-full text-center"},"试音录入",-1)])),default:l(()=>[N(s(E))]),_:1})):P("",!0),x.value?(C(),b(s(w),{key:2},{title:l(()=>o[2]||(o[2]=[F("div",{class:"w-full text-center"},"试音录入",-1)])),default:l(()=>[N(s(Z))]),_:1})):P("",!0),I.value?(C(),b(s(w),{key:3},{title:l(()=>o[3]||(o[3]=[F("div",{class:"w-full text-center"},"试音录入",-1)])),default:l(()=>[N(t)]),_:1})):P("",!0),U.value?(C(),b(s(w),{key:4},{title:l(()=>o[4]||(o[4]=[F("div",{class:"w-full text-center"},"试音录入",-1)])),default:l(()=>[N(s(H))]),_:1})):P("",!0),M.value?(C(),b(s(w),{key:5},{title:l(()=>o[5]||(o[5]=[F("div",{class:"w-full text-center"},"试音录入",-1)])),default:l(()=>[N(s(K))]),_:1})):P("",!0)]),_:1})}}});export{Be as default};
